<%- include('../partials/head') %>
<%- include('../partials/navbar') %>
<main>
    <h1>MON PROFIL</h1>
    <div class="avatar-content">
        <% if(user.avatarUrl === "") { %>
            <div class="img-avatar-content"></div>
            <div class="forms">
                <form class="form-choose" action="/updateProfil" method="post" enctype="multipart/form-data">
                    <label class="avatar-label" for="avatarUrl">AJOUTER UNE PHOTO DE PROFIL</label>
                    <input type="file" id="avatarUrl" name="image" accept="image/*">
                    <button type="submit" id="submitButton" style="display: none;">ENVOYER</button>
                </form>
            </div>
        <% } else { %>
            <div class="img-avatar-content">
                <img src="../../../uploads/<%= user.avatarUrl %>" alt="avatar de profil">
            </div>
            <div class="forms">
                <form action="/updateProfil" method="post">
                    <input type="hidden" name="deleteAvatar" value="true">
                    <button type="submit">SUPPRIMER</button>
                </form>
                <form action="/updateProfil" method="post" enctype="multipart/form-data">
                    <label class="avatar-label" for="avatarUrl">MODIFIER</label>
                    <input type="file" id="avatarUrl" name="image" accept="image/*">
                    <button type="submit" id="submitButton" style="display: none;">ENVOYER</button>
                </form>
            </div>
        <% } %>
    </div>
    <div class="all-infos-content">
        <div class="info-content">
            <div class="info info-username">
                <span>Nom d'utilisateur</span>
                <span><%= user.username %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-role">
                <span>Rôle</span>
                <span><%= userRole %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-last">
                <span>Nom de famille</span>
                <span><%= user.last %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-first">
                <span>Prénom</span>
                <span><%= user.first %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-age">
                <span>Âge</span>
                <span><%= age %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-address">
                <span>Adresse</span>
                <span>
                    <%= user.address.number %> <%= user.address.street %>, <%= user.address.zip %> <%= user.address.city %>, <%= user.address.country %>
                </span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-bio">
                <span>Bio</span>
                <span><%= user.bio %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-email">
                <span>E-mail</span>
                <span><%= user.email %></span>
            </div>
        </div>
        <div class="info-content">
            <div class="info info-password">
                <span>Mot de passe</span>
                <span>*********</span>
            </div>
        </div>
    </div>
</main>
<script>
    document.getElementById("avatarUrl").addEventListener("change", function () {
        const submitButton = document.getElementById("submitButton");
        submitButton.style.display = this.files.length > 0 ? "block" : "none";
    });
</script>
<%- include('../partials/footer') %>