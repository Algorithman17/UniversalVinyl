<%- include('../partials/header') %>
<h1>Bienvenue sur la page d'accueil</h1>
<a href="/register-form" class="btn btn-primary">S'inscrire</a>
<a href="/login-form" class="btn btn-primary">Se connecter</a>

<% if (user) { %>
    <p>Connecté en tant que <strong><%= user.email %></strong></p>
    <form action="/logout" method="POST">
        <button type="submit">Se déconnecter</button>
    </form>
<% } else { %>  
    <form action="/login" method="POST">
        <input type="text" name="username" placeholder="Nom d'utilisateur" required>
        <input type="password" name="password" placeholder="Mot de passe" required>
        <button type="submit">Se connecter</button>
    </form>
<% } %>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const message = "<%- (typeof message !== 'undefined') ? message.text : '' %>";
        const messageType = "<%- (typeof message !== 'undefined') ? message.type : '' %>";

        if (message) {
            Swal.fire({
                title: messageType === "success" ? "Succès !" : "Erreur !",
                text: message,
                icon: messageType,
                confirmButtonText: "OK",
                //timer: 3000, // Ferme automatiquement après 3s
                showConfirmButton: true
            });
        }
    });
</script>
<%- include('../partials/footer') %>